<div class="card h-100 border-0 shadow-sm product-card-hover" style="transition: transform 0.2s, box-shadow 0.2s;">
    
    <a href="{{ url_for('loja.detalhe_produto', pid=pid) }}" style="text-decoration: none; color: inherit;">
        
        <div style="height: 220px; overflow: hidden; display: flex; align-items: center; justify-content: center; background: #fff; padding: 20px; position: relative;">
            
            {% if produto.preco < 200 %}
                <span class="badge bg-danger position-absolute top-0 start-0 m-2">OFERTA</span>
            {% endif %}

            <img src="{{ produto.imagem_url if produto.imagem_url else 'https://via.placeholder.com/300x300?text=Sem+Foto' }}" 
                 alt="{{ produto.nome }}" 
                 style="max-height: 100%; max-width: 100%; object-fit: contain;">
        </div>
    </a>
    
    <div class="card-body p-3 d-flex flex-column">
        <small class="text-muted text-uppercase" style="font-size: 0.75rem; letter-spacing: 1px;">{{ produto.categoria }}</small>
        
        <a href="{{ url_for('loja.detalhe_produto', pid=pid) }}" class="text-dark text-decoration-none">
            <h6 class="card-title my-2 text-truncate-2" style="font-size: 1rem; height: 2.4em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                {{ produto.nome }}
            </h6>
        </a>
        
        <div class="mb-2 text-warning" style="font-size: 0.8rem;">
            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
            <span class="text-muted ms-1">(12)</span>
        </div>

        <div class="mt-auto">
            <span class="text-muted text-decoration-line-through" style="font-size: 0.85rem;">R$ {{ "%.2f"|format(produto.preco * 1.2) }}</span>
            <div class="d-flex align-items-baseline">
                <span style="font-size: 0.9rem; margin-right: 2px;">R$</span>
                <span class="fw-bold text-dark" style="font-size: 1.6rem;">{{ "%.2f"|format(produto.preco) }}</span>
            </div>
            <p class="text-success mb-3" style="font-size: 0.85rem; font-weight: 500;">
                Em at√© 10x sem juros
            </p>

            <form action="{{ url_for('checkout.adicionar_item') }}" method="POST" class="d-grid">
                <input type="hidden" name="produto_id" value="{{ pid }}">
                <input type="hidden" name="quantidade" value="1">
                <button type="submit" name="acao_compra" value="adicionar_carrinho" class="btn btn-warning btn-sm rounded-pill fw-bold">
                    Adicionar ao Carrinho
                </button>
            </form>
        </div>
    </div>
</div>